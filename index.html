<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Judge Extension Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Typing Judge Extension Generator</h1>
        
        <div class="form-group demo-section">
            <h3>üéÆ Try Demo First!</h3>
            <p>Download a working demo extension with sample beep sounds to test how it works on YouTube, Gmail, WhatsApp Web, Discord, and all other websites!</p>
            <button onclick="createDemoExtension()" id="demoBtn" class="demo-button">
                üéØ Download Demo Extension (With Sample Audio)
            </button>
            <small>Try the demo first to see how it detects typing everywhere, then create your custom Malayalam version below!</small>
        </div>
        
        <hr>
        
        <div class="form-group">
            <h3>üéµ Create Your Custom Malayalam Version</h3>
            
            <label>‚ö° Typing Speed Threshold (Characters Per Second):</label>
            <input type="number" id="threshold" value="3" min="0.5" max="10" step="0.1">
            <div class="speed-info">
                <strong>Speed Guide:</strong><br>
                ‚Ä¢ Below 5 CPS = Slow (gets insults)<br>
                ‚Ä¢ 5-7 CPS = Medium (neutral sounds)<br>
                ‚Ä¢ Above 7 CPS = Fast (gets praise)
            </div>
        </div>
        
        <div class="form-group">
            <label>üéµ Upload Your Malayalam Audio Files:</label>
            
            <label>üêå Slow Typing Audio (insults):</label>
            <input type="file" id="audioFileSlow" accept=".mp3">
            
            <label>‚öñÔ∏è Medium Typing Audio (neutral):</label>
            <input type="file" id="audioFileMedium" accept=".mp3">
            
            <label>üöÄ Fast Typing Audio (praise):</label>
            <input type="file" id="audioFileFast" accept=".mp3">
        </div>
        
        <button onclick="generateExtension()" id="generateBtn">
            üöÄ Generate Custom Malayalam Extension
        </button>
        
        <div id="status"></div>
        
        <div class="form-group">
            <h3>üìù How to Install Extensions:</h3>
            <ol>
                <li>Download the ZIP file (demo or custom)</li>
                <li>Unzip it to a folder on your computer</li>
                <li>Open Chrome ‚Üí go to <code>chrome://extensions/</code></li>
                <li>Turn on "Developer mode" (top right toggle)</li>
                <li>Click "Load unpacked" and select your unzipped folder</li>
                <li>Start typing anywhere and get judged! üé≠</li>
            </ol>
            
            <h4>üåê Works On All These Websites:</h4>
            <ul>
                <li>‚úÖ YouTube comments</li>
                <li>‚úÖ Gmail compose</li>
                <li>‚úÖ WhatsApp Web messages</li>
                <li>‚úÖ Discord chat</li>
                <li>‚úÖ Twitter/X posts</li>
                <li>‚úÖ Facebook posts/comments</li>
                <li>‚úÖ Instagram comments</li>
                <li>‚úÖ Reddit posts/comments</li>
                <li>‚úÖ Any text input field!</li>
            </ul>
        </div>
    </div>

    <script src="scriptTemplate.js"></script>
    <script src="zipCreator.js"></script>
    <script src="script.js"></script>
    
    <script>
        async function createDemoExtension() {
            console.log('Creating demo extension with sample audio...');
            
            showLoading();
            document.getElementById('demoBtn').disabled = true;
            document.getElementById('demoBtn').textContent = 'üîÑ Creating Demo...';
            
            try {
                const zip = new JSZip();
                
                const demoManifest = {
                    "manifest_version": 3,
                    "name": "Malayalam Typing Judge - DEMO",
                    "version": "1.0",
                    "description": "Demo version with sample beep sounds - Works on ALL websites!",
                    "permissions": [],
                    "content_scripts": [
                        {
                            "matches": ["<all_urls>"],
                            "js": ["script.js"]
                        }
                    ],
                    "web_accessible_resources": [
                        {
                            "resources": ["audio/*.mp3"],
                            "matches": ["<all_urls>"]
                        }
                    ]
                };
                
                const demoScript = createScriptContent(2);
                
                zip.file("manifest.json", JSON.stringify(demoManifest, null, 2));
                zip.file("script.js", demoScript);
               
                const audioFolder = zip.folder("audio");
                
                const slowAudio = await fetch('audio/slow.mp3').then(res => res.arrayBuffer());
                const mediumAudio = await fetch('audio/medium.mp3').then(res => res.arrayBuffer());
                const fastAudio = await fetch('audio/fast.mp3').then(res => res.arrayBuffer());

                audioFolder.file("slow.mp3", slowAudio);
                audioFolder.file("medium.mp3", mediumAudio);
                audioFolder.file("fast.mp3", fastAudio);
               
                const readmeContent = `# Malayalam Typing Judge - DEMO Extension

## What This Does:
- Monitors your typing speed on ALL websites
- Plays sounds based on your typing speed
- Works in ANY editable field across the web!

## How to Install:
1. Unzip this folder
2. Open Chrome ‚Üí chrome://extensions/
3. Turn on "Developer mode"
4. Click "Load unpacked" ‚Üí select this folder
5. Start typing anywhere!

## Try It On:
- YouTube comments
- Gmail compose  
- WhatsApp Web
- Twitter/X
- Discord
- Any text field!

## Current Threshold: 2 CPS
- Slow (<2 CPS) = "Slow" sound
- Fast (>4 CPS) = "Fast" sound

Note: This demo uses beep sounds. Upload Malayalam audio for full experience!`;
                
                zip.file("README.md", readmeContent);
             
                const content = await zip.generateAsync({type: "blob"});
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = 'malayalam-typing-judge-DEMO.zip';
                link.click();
                
                showSuccess('Demo extension created! Install it to test the typing detection.');
                
            } catch (error) {
                console.error('Error creating demo:', error);
                showError('Failed to create demo: ' + error.message);
            } finally {
                hideLoading();
                document.getElementById('demoBtn').disabled = false;
                document.getElementById('demoBtn').textContent = 'üéØ Download Demo Extension (With Sample Audio)';
            }
        }
    </script>
</body>
</html>